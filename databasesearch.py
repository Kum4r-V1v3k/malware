import customtkinter
import writeintomongo

toplevel = customtkinter.CTk()
customtkinter.set_default_color_theme("green")
toplevel.geometry("1024x768")
toplevel.title("Search for Records")
label_1 = customtkinter.CTkLabel(toplevel, text="Enter file name:-  ")
label_1.place(relx=0.3, rely=0.05)
entry_1 = customtkinter.CTkEntry(toplevel)
entry_1.place(relx=0.6, rely=0.05)

text = customtkinter.CTkTextbox(toplevel, width=600, height=500, bg_color="#2B2B2B", corner_radius=10)
text.place(relx=0.3, rely=0.25)
text.insert("0.0", "\t\t\t       Records are shown here")
text.configure(state="disabled")


def search():
    result = ""
    filename = entry_1.get()
    searcher = writeintomongo.Recorder().search(filename)
    for i in searcher:
        if len(i) != 0:
            for j in i:
                for k in j:
                    result += k + " : " + str(j[k]) + "\n"
                result += "\n"
    if len(result.strip()) == 0:
        result = "NOTHING FOUND"
    print(result)
    text.configure(state="normal")
    text.delete("0.0", "end")
    text.insert("0.0", result)
    text.configure(state="disabled")


button = customtkinter.CTkButton(toplevel, text="Search", command=search)
button.place(relx=0.45, rely=0.15)
toplevel.mainloop()
